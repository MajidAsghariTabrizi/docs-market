<!doctype html>
<html lang="fa" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>مقدمه و تعاریف | راهنمای یکپارچه‌سازی POS با اسنپ! مارکت</title>
  <link rel="stylesheet" href="../style.css" />
</head>
<body>

<header class="header">
  <div class="container">
    <nav class="breadcrumb">
      <a href="../index.html">خانه</a> / <span>مقدمه و تعاریف</span>
    </nav>
    <h1>مقدمه و تعاریف</h1>
  </div>
</header>

<main class="container">

  <section class="panel">
    <h2>۱. مقدمه</h2>
    <p>
      این مستند فنی با هدف تشریح نحوه‌ی تعامل سیستم‌های
      <strong>POS فروشگاهی</strong> با سامانه فروش آنلاین
      <strong>اسنپ! مارکت</strong> تهیه شده است.
    </p>
    <p>
      ارتباط میان POS و پلتفرم اسنپ! مارکت از طریق
      <strong>API مبتنی بر HTTPS</strong> برقرار می‌شود و
      احراز هویت با استفاده از استاندارد <strong>OAuth2</strong>
      انجام می‌گیرد.
    </p>
    <p>
      در تمامی اندپوینت‌ها:
    </p>
    <ul>
      <li>قیمت‌ها بر حسب <strong>تومان</strong> هستند</li>
      <li>زمان‌ها بر حسب <strong>دقیقه</strong> محاسبه می‌شوند</li>
    </ul>
  </section>

  <section class="panel">
    <h2>۲. دامنه و کاربرد</h2>
    <p>این مستند موارد زیر را پوشش می‌دهد:</p>
    <ul>
      <li>احراز هویت و مدیریت توکن دسترسی</li>
      <li>همگام‌سازی اطلاعات محصول، قیمت، تخفیف و موجودی</li>
      <li>دریافت سفارش از طریق Webhook یا MQTT</li>
      <li>پردازش سفارش (Ack / Pick / Accept / Reject)</li>
      <li>پایش اتصال، گزارش‌گیری و مدیریت خطا</li>
    </ul>
    <p>
      مخاطب این مستند، تیم‌های توسعه POS، نرم‌افزارهای حسابداری
      فروشگاهی و سامانه‌های مرکزی چین‌استورها هستند.
    </p>
  </section>

  <section class="panel">
    <h2>۳. تعاریف پایه</h2>
    <table>
      <thead>
        <tr>
          <th>اصطلاح</th>
          <th>تعریف</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>Vendor (فروشگاه)</td>
          <td>
            هر واحد فیزیکی یا منطقی فروش که دارای استقلال در
            سفارش‌گیری، موجودی، قیمت‌گذاری و پردازش سفارش است
            (مانند شعب یک فروشگاه زنجیره‌ای).
          </td>
        </tr>
        <tr>
          <td>Product (محصول)</td>
          <td>
            کالای قابل فروش که با <strong>بارکد یکتا</strong>
            شناسایی می‌شود و دارای قیمت، تخفیف، موجودی و وضعیت فعال/غیرفعال است.
          </td>
        </tr>
        <tr>
          <td>Order (سفارش)</td>
          <td>
            سبد نهایی‌شده کاربر شامل اقلام، تعداد، قیمت نهایی،
            روش ارسال و اطلاعات تحویل که برای فروشگاه ارسال می‌شود.
          </td>
        </tr>
        <tr>
          <td>VendorCode</td>
          <td>
            شناسه یکتای فروشگاه در سامانه اسنپ! مارکت که در
            بدنه بسیاری از درخواست‌ها استفاده می‌شود.
          </td>
        </tr>
        <tr>
          <td>Access Token</td>
          <td>
            توکن صادرشده از سرویس احراز هویت که برای فراخوانی
            APIها در هدر Authorization استفاده می‌شود.
          </td>
        </tr>
      </tbody>
    </table>
  </section>

  <section class="panel">
    <h2>۴. نگاه عملیاتی: POS و همگام‌سازی داده</h2>
    <p>
      در معماری اسنپ! مارکت، <strong>POS منبع حقیقت (Source of Truth)</strong>
      برای قیمت و موجودی فروشگاه محسوب می‌شود.
      بنابراین ارسال به‌موقع و صحیح داده‌ها از POS نقش حیاتی در
      جلوگیری از مغایرت سفارش‌ها دارد.
    </p>
    <p>
      هرگونه وقفه، قطعی شبکه یا ارسال ناقص داده می‌تواند منجر به
      <em>Data Drift</em> (ناهم‌ترازی داده‌ها) شود که نتیجه آن:
    </p>
    <ul>
      <li>اختلاف قیمت در سفارش</li>
      <li>عدم تطابق موجودی واقعی با سفارش</li>
      <li>افزایش Reject و تماس مرکز تماس</li>
    </ul>
  </section>

  <section class="panel">
    <h2>۵. Sync و Resync (Best Practice عملیاتی)</h2>
    <p>
      برای حفظ پایداری سیستم، POS باید از دو مفهوم کلیدی پشتیبانی کند:
    </p>
    <ul>
      <li>
        <strong>Sync:</strong> ارسال بلادرنگ تغییرات قیمت و موجودی
        در لحظه تغییر در فروشگاه
      </li>
      <li>
        <strong>Resync:</strong> ارسال مجدد و کامل داده‌ها
        در صورت تشخیص مغایرت یا Weak Signal
      </li>
    </ul>
    <div class="callout">
      <strong>تجربه عملیاتی:</strong>
      در بسیاری از چین‌استورها، اجرای صرفاً دوره‌ای Sync
      (مثلاً هر چند ساعت یکبار) باعث انباشت مغایرت می‌شود.
      توصیه می‌شود Resync به‌صورت هوشمند و رویدادمحور
      فعال گردد.
    </div>
  </section>

  <section class="panel">
    <h2>۶. نمای کلی فلو ارتباطی</h2>
    <ol>
      <li>دریافت Access Token</li>
      <li>ارسال اطلاعات محصول، قیمت و موجودی</li>
      <li>دریافت سفارش از اسنپ! مارکت</li>
      <li>پردازش سفارش و ارسال Ack / Pick / Accept / Reject</li>
      <li>پایش و اصلاح مغایرت‌ها با Sync / Resync</li>
    </ol>
  </section>

  <section class="panel">
    <h2>۷. ادامه مسیر</h2>
    <p>
      در بخش بعدی، فرآیند احراز هویت و دریافت توکن دسترسی
      به‌صورت کامل تشریح شده است.
    </p>
    <a href="02-auth.html" class="btn-primary">
      رفتن به بخش ۲: احراز هویت (OAuth2)
    </a>
  </section>

</main>

<footer class="footer">
  <p>© تیم فنی اسنپ! مارکت — مستند یکپارچه‌سازی POS (v2.1.1)</p>
</footer>

</body>
</html>
